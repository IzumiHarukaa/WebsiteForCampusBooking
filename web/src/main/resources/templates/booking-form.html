<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>New Booking Request</title>
    <link rel="stylesheet" type="text/css" th:href="@{/style.css}" />
    <!-- Including Pikaday for a better date picker -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
</head>
<body>
    <div class="container">
        <div class="card" style="max-width: 800px; margin: 2rem auto;">
            <div class="flex-container">
                <h1>New Event Application</h1>
                <a th:href="@{/student/dashboard}" class="btn btn-secondary">Back to Dashboard</a>
            </div>

            <form th:action="@{/bookings}" th:object="${booking}" method="post" style="margin-top: 2rem;">

                <div class="form-grid">
                    <div class="form-group">
                        <label for="bookingId">Booking ID</label>
                        <input type="text" th:field="*{bookingId}" placeholder="e.g., EVT-CSE-01" class="form-control" required/>
                    </div>
                    <div class="form-group">
                        <label for="eventName">Event Name</label>
                        <input type="text" th:field="*{eventName}" class="form-control" required/>
                    </div>
                     <div class="form-group">
                        <label for="date">Date of Event</label>
                        <input type="text" id="datepicker" th:field="*{date}" class="form-control" required autocomplete="off"/>
                    </div>
                    <div class="form-group">
                        <label for="timeSlot">Time Slot</label>
                        <input type="text" th:field="*{timeSlot}" placeholder="e.g., 14:00 - 16:00" class="form-control" required/>
                    </div>
                    <div class="form-group">
                        <label for="facility.name">Venue / Facility</label>
                        <input type="text" th:field="*{facility.name}" placeholder="e.g., Main Auditorium" class="form-control" required/>
                    </div>
                    <div class="form-group">
                        <label for="facility.type">Facility Type</label>
                        <!-- FIX: Removed the 'readonly' attribute to make this field editable -->
                        <input type="text" th:field="*{facility.type}" placeholder="e.g., Auditorium, Lab, Hall" class="form-control"/>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 1rem;">
                    <label for="eventDescription">Brief Description of Event</label>
                    <textarea th:field="*{eventDescription}" rows="4" class="form-control"></textarea>
                </div>

                <div style="display: flex; align-items: center; margin: 1.5rem 0;">
                    <input type="checkbox" th:field="*{paSystemRequired}" style="margin-right: 0.5rem; transform: scale(1.2);"/>
                    <label for="paSystemRequired">Public Address (PA) System Required?</label>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Request</button>
            </form>
        </div>
    </div>
    
    <!-- JavaScript for the date picker -->
    <script src="https://cdn.jsdelivr.net/npm/moment/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
    <script>
        var picker = new Pikaday({
            field: document.getElementById('datepicker'),
            format: 'DD/MM/YY',
        });
    </script>
</body>
</html>

